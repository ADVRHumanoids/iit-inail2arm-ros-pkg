<?xml version="1.0"?>
<launch>
  
    <arg name="rate" default="100" />
    <arg name="gdb" default="false"/> <!-- for debug with gdb -->

    <arg if="$(arg gdb)" name="prefix" value="gdb -ex run --arg" />
    <arg unless="$(arg gdb)" name="prefix" value="" />
    
    <!--   joint_state_controller should always be on   -->
    <arg name="controllers" default="joint_state_controller"/> 
    <arg name="active_controllers" default="pos_joint_controller "/>
    <arg name="stopped_controllers" default="pos_joint_traj_controller" />

    <arg name="controller_config_file" default="$(find inail2arm_ros_control)/config/inail2arm_controllers.yaml" doc="Config file used for defining the ROS-Control controllers."/>
    <rosparam file="$(arg controller_config_file)" command="load"/>

    <!-- Launch the ros hw interface for xbot -->
    <include file="$(find ros_xbot_hw_interface)/launch/ros_xbot_hw_interface.launch">
      <arg name="gdb" value="false" />
    </include>
    
    <!-- spawn controller manager loading the controllers -->
    <node name="ros_control_controller_spawner" pkg="controller_manager" type="spawner" respawn="false"
    output="screen" args="$(arg controllers) $(arg active_controllers)" />
    
    <!-- load other controller -->
    <node name="ros_control_stopped_spawner" pkg="controller_manager" type="spawner" respawn="false"
    output="screen" args="--stopped $(arg stopped_controllers)" unless="$(eval arg('stopped_controllers') == '')"/>
    

</launch>

